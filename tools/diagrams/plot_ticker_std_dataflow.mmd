flowchart TB
    subgraph Entrées
        Input1[("Fichier LZ4<br/>prices_data.lz4")]
        Input2["Paramètres:<br/>- Ticker<br/>- Intervalle"]
    end
    
    subgraph "Étape 1: Chargement"
        Load[PriceLogger<br/>Décompression LZ4]
        Filter[Filtrage par ticker]
    end
    
    subgraph "Étape 2: Rééchantillonnage"
        Resample[Regrouper par intervalles<br/>de 5 minutes]
        Aggregate[Calculer moyenne<br/>des prix]
    end
    
    subgraph "Étape 3: Calculs Statistiques"
        CalcReturns[Calculer rendements<br/>en pourcentage]
        ReturnsFormula["Return = (Prix_t - Prix_t-1) / Prix_t-1 × 100"]
        CalcMean[Calculer moyenne<br/>des rendements]
        CalcStd[Calculer écart-type<br/>formule standard]
    end
    
    subgraph "Étape 4: Visualisation"
        CreateFig[Créer figure<br/>2 sous-graphiques]
        PlotPrice[Graphique 1:<br/>Prix rééchantillonnés]
        PlotReturns[Graphique 2:<br/>Rendements avec<br/>moyenne et ± écart-type]
    end
    
    subgraph Sortie
        Output[("Image PNG<br/>{ticker}_price_std_history.png")]
    end
    
    subgraph "Données intermédiaires"
        Data1["timestamps[]<br/>prices[]"]
        Data2["resampled_times[]<br/>resampled_prices[]"]
        Data3["returns[]<br/>mean_returns<br/>std_dev"]
    end
    
    Input1 --> Load
    Input2 --> Filter
    Load --> Filter
    
    Filter --> Data1
    Data1 --> Resample
    Resample --> Aggregate
    
    Aggregate --> Data2
    Data2 --> CalcReturns
    CalcReturns --> ReturnsFormula
    ReturnsFormula --> CalcMean
    CalcMean --> CalcStd
    
    CalcStd --> Data3
    
    Data2 --> CreateFig
    Data3 --> CreateFig
    
    CreateFig --> PlotPrice
    CreateFig --> PlotReturns
    
    PlotPrice --> Output
    PlotReturns --> Output
